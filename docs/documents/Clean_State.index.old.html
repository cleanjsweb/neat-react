<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>index.old | @cleanweb/react - v2.1.1-beta.0</title><meta name="description" content="Documentation for @cleanweb/react"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@cleanweb/react - v2.1.1-beta.0</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@cleanweb/react</a></li><li><a href="Clean_State.html">Clean State</a></li><li><a href="Clean_State.index.old.html">index.old</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="cleaner-state-management-for-react-function-components" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Cleaner State Management for React Function Components<a href="#cleaner-state-management-for-react-function-components" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Say you have a component with some state like this:</p>
<pre><code class="jsx"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">Button</span><span class="hl-1"> = (</span><span class="hl-3">props</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-2">label</span><span class="hl-1">, </span><span class="hl-2">setLabel</span><span class="hl-1">] = </span><span class="hl-6">useState</span><span class="hl-1">(</span><span class="hl-4">&#39;Click me&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-2">clicked</span><span class="hl-1">, </span><span class="hl-2">setClicked</span><span class="hl-1">] = </span><span class="hl-6">useState</span><span class="hl-1">(</span><span class="hl-0">false</span><span class="hl-1">);</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-2">state3</span><span class="hl-1">, </span><span class="hl-2">setState3</span><span class="hl-1">] = </span><span class="hl-6">useState</span><span class="hl-1">(</span><span class="hl-3">props</span><span class="hl-1">.</span><span class="hl-3">defaultValue</span><span class="hl-1">);</span><br/><br/><span class="hl-1">	</span><span class="hl-7">return</span><span class="hl-1"> (</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;</span><span class="hl-12">button</span><span class="hl-1"> </span><span class="hl-10">onClick</span><span class="hl-1">=</span><span class="hl-0">{</span><span class="hl-11">() </span><span class="hl-0">=&gt;</span><span class="hl-11"> </span><span class="hl-6">setClicked</span><span class="hl-11">(</span><span class="hl-0">true</span><span class="hl-11">)</span><span class="hl-0">}</span><span class="hl-8">&gt;</span><br/><span class="hl-1">			</span><span class="hl-0">{</span><span class="hl-3">label</span><span class="hl-0">}</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;/</span><span class="hl-12">button</span><span class="hl-8">&gt;</span><br/><span class="hl-1">	);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>As noted in the <a href="./../index.md">introductory page</a>, you may consider writing a custom hook to simplify working with these state values.</p>
<pre><code class="jsx"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">useButtonState</span><span class="hl-1"> = (</span><span class="hl-3">props</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-2">label</span><span class="hl-1">, </span><span class="hl-2">setLabel</span><span class="hl-1">] = </span><span class="hl-6">useState</span><span class="hl-1">(</span><span class="hl-4">&#39;Click me&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-2">clicked</span><span class="hl-1">, </span><span class="hl-2">setClicked</span><span class="hl-1">] = </span><span class="hl-6">useState</span><span class="hl-1">(</span><span class="hl-0">false</span><span class="hl-1">);</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> [</span><span class="hl-2">state3</span><span class="hl-1">, </span><span class="hl-2">setState3</span><span class="hl-1">] = </span><span class="hl-6">useState</span><span class="hl-1">(</span><span class="hl-3">props</span><span class="hl-1">.</span><span class="hl-3">defaultValue</span><span class="hl-1">);</span><br/><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">_set</span><span class="hl-1"> = {</span><br/><span class="hl-1">		</span><span class="hl-3">label:</span><span class="hl-1"> </span><span class="hl-3">setLabel</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-3">clicked:</span><span class="hl-1"> </span><span class="hl-3">setClicked</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-3">state3:</span><span class="hl-1"> </span><span class="hl-3">setState3</span><span class="hl-1">,</span><br/><span class="hl-1">	};</span><br/><br/><span class="hl-1">	</span><span class="hl-7">return</span><span class="hl-1"> { </span><span class="hl-3">label</span><span class="hl-1">, </span><span class="hl-3">clicked</span><span class="hl-1">, </span><span class="hl-3">state3</span><span class="hl-1">, </span><span class="hl-3">_set</span><span class="hl-1"> };</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">Button</span><span class="hl-1"> = (</span><span class="hl-3">props</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">state</span><span class="hl-1"> = </span><span class="hl-6">useButtonState</span><span class="hl-1">(</span><span class="hl-3">props</span><span class="hl-1">);</span><br/><br/><span class="hl-1">	</span><span class="hl-7">return</span><span class="hl-1"> (</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;</span><span class="hl-12">button</span><span class="hl-1"> </span><span class="hl-10">onClick</span><span class="hl-1">=</span><span class="hl-0">{</span><span class="hl-11">() </span><span class="hl-0">=&gt;</span><span class="hl-11"> </span><span class="hl-3">state</span><span class="hl-11">.</span><span class="hl-3">_set</span><span class="hl-11">.</span><span class="hl-6">clicked</span><span class="hl-11">(</span><span class="hl-0">true</span><span class="hl-11">)</span><span class="hl-0">}</span><span class="hl-8">&gt;</span><br/><span class="hl-1">			</span><span class="hl-0">{</span><span class="hl-3">label</span><span class="hl-0">}</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;/</span><span class="hl-12">button</span><span class="hl-8">&gt;</span><br/><span class="hl-1">	);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>Important:</strong> Of course this example is only for illustrative purposes. This change would be completely unnecessary for a component as small as our <code>Button</code> example here. A setup like this is mostly only useful for larger components with a lot of seperate state variables.</p>
</blockquote>
<p>Separating things out like this makes the component look much smaller and definitely much easier to read. This type of decluttering could be of particular value to certain neurodivergent people, but really anyone can appreciate a good decluttering.</p>
<p>If you have a larger function component, it may be easy to see how a pattern like this could be of benefit, except for the extra lines required to define each setter, which must increase linearly with each new state variable. It's possible to improve this of course, and have <code>_set</code> dynamically generated. You'll have less code, and won't need double the number of new lines for each new state variable.</p>
<a id="usecleanstate" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useCleanState<a href="#usecleanstate" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>useCleanState</code> adds this and a handful of other improvements, making it easy for you to define state variables in a way that doesn't clutter your components, and work with those variables in very convenient ways. Here is what our <code>Button</code> component might look like with the <code>useCleanState</code> hook:</p>
<pre><code class="jsx"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">initialState</span><span class="hl-1"> = {</span><br/><span class="hl-1">	</span><span class="hl-3">label:</span><span class="hl-1"> </span><span class="hl-4">&#39;Click me&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-3">clicked:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">,</span><br/><span class="hl-1">	</span><span class="hl-3">inputValue:</span><span class="hl-1"> {},</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">Button</span><span class="hl-1"> = () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">state</span><span class="hl-1"> = </span><span class="hl-6">useCleanState</span><span class="hl-1">(</span><span class="hl-3">initialState</span><span class="hl-1">);</span><br/><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">onClick</span><span class="hl-1"> = </span><span class="hl-6">useCallback</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">		</span><span class="hl-3">state</span><span class="hl-1">.</span><span class="hl-3">clicked</span><span class="hl-1"> = </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">	}, []);</span><br/><br/><span class="hl-1">	</span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-8">&lt;&gt;</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;</span><span class="hl-9">CustomInput</span><span class="hl-1"> </span><span class="hl-10">setValue</span><span class="hl-1">=</span><span class="hl-0">{</span><span class="hl-3">state</span><span class="hl-11">.</span><span class="hl-3">put</span><span class="hl-11">.</span><span class="hl-3">inputValue</span><span class="hl-0">}</span><span class="hl-8">&gt;</span><br/><br/><span class="hl-1">		</span><span class="hl-8">&lt;</span><span class="hl-12">button</span><span class="hl-1"> </span><span class="hl-10">onClick</span><span class="hl-1">=</span><span class="hl-0">{</span><span class="hl-3">onClick</span><span class="hl-0">}</span><span class="hl-8">&gt;</span><br/><span class="hl-1">			</span><span class="hl-0">{</span><span class="hl-3">state</span><span class="hl-11">.</span><span class="hl-3">label</span><span class="hl-0">}</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;/</span><span class="hl-12">button</span><span class="hl-8">&gt;</span><br/><span class="hl-1">	</span><span class="hl-8">&lt;/&gt;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<ol>
<li>
<p><code>put</code> holds setter functions that can be passed around conveniently. Each key in your state object gets a corresponding setter function of the same name in the <code>state.put</code> object. This means you cannot have a value named <code>put</code> in your state object, as it is a reserved name. To set multiple values simultaneously, use <a href="./api#putMany"><code>state.putMany</code></a>, which works just like <code>setState</code> in React class components.</p>
</li>
<li>
<p>Using JavaScript setters, state properties can also be assigned directly, with the same effect as if you called the setter function.</p>
<ol>
<li>Note that this only works when referencing the property directly on the state object, as in <code>state.clicked = true</code>. It will not have the intended effect if the value if first assigned to a separate local variable. So the example below will simply update the local varibale without actually updating the component's state:</li>
</ol>
<pre><code class="jsx"><span class="hl-0">let</span><span class="hl-1"> { </span><span class="hl-3">clicked</span><span class="hl-1"> } = </span><span class="hl-6">useCleanState</span><span class="hl-1">({ </span><span class="hl-3">clicked:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1"> });</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">onClick</span><span class="hl-1"> = () </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-3">clicked</span><span class="hl-1"> = </span><span class="hl-0">true</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>As a rule of thumb, if you are extracting individual values from the state object, use <code>const</code> so it's clear that the ephemeral copy you've created shouldn't be reassigned.</p>
</li>
</ol>
<p>But we want to set the initial <code>inputValue</code> based on props, so we might consider moving the <code>initialState</code> object into the component and passing it as a literal to <code>useCleanState</code>. But that seems like it would undo some of the decluttering advantages of the hook. To avoid that, you can pass a function instead, and a second argument to be passed on to the function. The second argument can be anything: the entire props object, a specific primitive value, or perhaps a tuple (i.e an array of arguments).</p>
<blockquote>
<p>Note that <code>useCleanState</code> can be called multiple times in the same component if you prefer to have you component's state grouped into separate objects.</p>
</blockquote>
<pre><code class="jsx"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">initState</span><span class="hl-1"> = ({ </span><span class="hl-3">defaultValue</span><span class="hl-1"> }) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-7">return</span><span class="hl-1"> {</span><br/><span class="hl-1">		</span><span class="hl-3">label:</span><span class="hl-1"> </span><span class="hl-4">&#39;Click me&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-3">clicked:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">,</span><br/><span class="hl-1">		</span><span class="hl-3">inputValue:</span><span class="hl-1"> </span><span class="hl-3">defaultValue</span><span class="hl-1">,</span><br/><span class="hl-1">	};</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">Button</span><span class="hl-1"> = () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">	</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">state</span><span class="hl-1"> = </span><span class="hl-6">useCleanState</span><span class="hl-1">(</span><span class="hl-3">initState</span><span class="hl-1">, </span><span class="hl-3">props</span><span class="hl-1">);</span><br/><br/><span class="hl-1">	</span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-8">&lt;&gt;</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;</span><span class="hl-9">CustomInput</span><span class="hl-1"> </span><span class="hl-10">setValue</span><span class="hl-1">=</span><span class="hl-0">{</span><span class="hl-3">state</span><span class="hl-11">.</span><span class="hl-3">put</span><span class="hl-11">.</span><span class="hl-3">inputValue</span><span class="hl-0">}</span><span class="hl-8">&gt;</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;</span><span class="hl-12">button</span><span class="hl-1"> </span><span class="hl-10">onClick</span><span class="hl-1">=</span><span class="hl-0">{</span><span class="hl-11">() </span><span class="hl-0">=&gt;</span><span class="hl-11"> </span><span class="hl-3">state</span><span class="hl-11">.</span><span class="hl-3">put</span><span class="hl-11">.</span><span class="hl-6">clicked</span><span class="hl-11">(</span><span class="hl-0">true</span><span class="hl-11">)</span><span class="hl-0">}</span><span class="hl-8">&gt;</span><br/><span class="hl-1">			</span><span class="hl-0">{</span><span class="hl-3">state</span><span class="hl-11">.</span><span class="hl-3">label</span><span class="hl-0">}</span><br/><span class="hl-1">		</span><span class="hl-8">&lt;/</span><span class="hl-12">button</span><span class="hl-8">&gt;</span><br/><span class="hl-1">	</span><span class="hl-8">&lt;/&gt;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#cleaner-state-management-for-react-function-components"><span>Cleaner <wbr/>State <wbr/>Management for <wbr/>React <wbr/>Function <wbr/>Components</span></a><ul><li><a href="#usecleanstate"><span>use<wbr/>Clean<wbr/>State</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">@cleanweb/react - v2.1.1-beta.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
